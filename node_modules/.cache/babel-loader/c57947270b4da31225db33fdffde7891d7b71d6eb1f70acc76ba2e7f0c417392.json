{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addToCart, removeFromCart, updateQuantity, calculateSubtotal, getTotal, applyDiscount, clearCart } from '../../store/reducers/cartSlice';\nimport { formatPrice } from './useUtil';\nexport const useCart = () => {\n  _s();\n  const dispatch = useDispatch();\n  const items = useSelector(state => state.cart.items);\n  const subtotal = useSelector(state => state.cart.subtotal);\n  const delivery = useSelector(state => state.cart.delivery);\n  const discount = useSelector(state => state.cart.discount);\n  const total = useSelector(state => state.cart.total);\n  const quantity = items.reduce((acc, item) => acc + item.quantity, 0);\n  useEffect(() => {\n    dispatch(calculateSubtotal());\n  }, [items, dispatch, quantity]);\n  useEffect(() => {\n    dispatch(getTotal());\n  }, [subtotal, delivery, dispatch, discount]);\n  const addToCartHandler = item => {\n    dispatch(addToCart(item));\n  };\n  const removeFromCartHandler = (itemId, size) => {\n    const item = items.find(item => item.product.id === itemId && item.size === size);\n    dispatch(removeFromCart({\n      product: item.product,\n      size\n    }));\n  };\n  const updateQuantityHandler = (productId, size, newQuantity) => {\n    if (newQuantity === 0) {\n      const item = items.find(item => item.product.id === productId && item.size === size);\n      if (item) {\n        dispatch(removeFromCart({\n          product: item.product,\n          size\n        }));\n      }\n    } else if (newQuantity <= 10) {\n      dispatch(updateQuantity({\n        productId,\n        size,\n        quantity: newQuantity\n      }));\n    }\n  };\n  const clearCartHandler = () => {\n    dispatch(clearCart());\n  };\n  const applyDiscountHandler = discountCode => {\n    const discount = 0.1;\n    if (discountCode.toLowerCase() === \"10off\") {\n      dispatch(applyDiscount({\n        discount\n      }));\n    } else {\n      alert(\"Wrong discount\");\n    }\n  };\n  return {\n    addToCart: addToCartHandler,\n    removeFromCart: removeFromCartHandler,\n    updateQuantity: updateQuantityHandler,\n    clearCart: clearCartHandler,\n    applyDiscount: applyDiscountHandler,\n    items,\n    defaultSubtotal: subtotal,\n    defaultTotal: total,\n    subtotal: formatPrice(subtotal),\n    delivery: formatPrice(delivery),\n    total: formatPrice(total),\n    quantity,\n    discount\n  };\n};\n_s(useCart, \"98MqLilp5l2C/Vs4O6Sx1LYL4ws=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector];\n});","map":{"version":3,"names":["useEffect","useDispatch","useSelector","addToCart","removeFromCart","updateQuantity","calculateSubtotal","getTotal","applyDiscount","clearCart","formatPrice","useCart","_s","dispatch","items","state","cart","subtotal","delivery","discount","total","quantity","reduce","acc","item","addToCartHandler","removeFromCartHandler","itemId","size","find","product","id","updateQuantityHandler","productId","newQuantity","clearCartHandler","applyDiscountHandler","discountCode","toLowerCase","alert","defaultSubtotal","defaultTotal"],"sources":["D:/03. Project/01. Web/ecommerce-app-ms-sql-net-react/frontend/src/utils/hooks/useCart.js"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addToCart, removeFromCart, updateQuantity, calculateSubtotal, getTotal, applyDiscount, clearCart } from '../../store/reducers/cartSlice';\r\nimport { formatPrice } from './useUtil';\r\n\r\nexport const useCart = () => {\r\n  const dispatch = useDispatch();\r\n  const items = useSelector(state => state.cart.items);\r\n  const subtotal = useSelector(state => state.cart.subtotal);\r\n  const delivery = useSelector(state => state.cart.delivery);\r\n  const discount = useSelector(state => state.cart.discount);\r\n  const total = useSelector(state => state.cart.total);\r\n  const quantity = items.reduce((acc, item) => acc + item.quantity, 0);\r\n\r\n  useEffect(() => {\r\n    dispatch(calculateSubtotal());\r\n  }, [items, dispatch, quantity]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getTotal());\r\n  }, [subtotal, delivery, dispatch, discount]);\r\n\r\n  const addToCartHandler = (item) => {\r\n    dispatch(addToCart(item));\r\n  };\r\n  \r\n  const removeFromCartHandler = (itemId, size) => {\r\n    const item = items.find((item) => item.product.id === itemId && item.size === size); \r\n    dispatch(removeFromCart({ product: item.product, size }));\r\n  };\r\n  \r\n  const updateQuantityHandler = (productId, size, newQuantity) => {\r\n    if (newQuantity === 0) {\r\n      const item = items.find((item) => item.product.id === productId && item.size === size);\r\n      if (item) {\r\n        dispatch(removeFromCart({ product: item.product, size }));\r\n      }\r\n    } else if (newQuantity <= 10) {\r\n      dispatch(updateQuantity({ productId, size, quantity: newQuantity }));\r\n    }\r\n  };\r\n\r\n  const clearCartHandler = () => {\r\n    dispatch(clearCart());\r\n  };\r\n\r\n  const applyDiscountHandler = (discountCode) => {\r\n    const discount = 0.1;\r\n    if(discountCode.toLowerCase() === \"10off\"){\r\n      dispatch(applyDiscount({ discount }));\r\n    } else{\r\n      alert(\"Wrong discount\")\r\n    }\r\n  }; \r\n\r\n  return { \r\n    addToCart: addToCartHandler, \r\n    removeFromCart: removeFromCartHandler, \r\n    updateQuantity: updateQuantityHandler, \r\n    clearCart: clearCartHandler, \r\n    applyDiscount: applyDiscountHandler,\r\n    items, \r\n    defaultSubtotal: subtotal,\r\n    defaultTotal: total, \r\n    subtotal: formatPrice(subtotal), \r\n    delivery: formatPrice(delivery), \r\n    total: formatPrice(total), \r\n    quantity,\r\n    discount\r\n  };\r\n};\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}